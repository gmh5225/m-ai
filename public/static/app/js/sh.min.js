!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SH=e():t.SH=e()}(self,(()=>(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{SimpleHtmlTemplate:()=>g,containers:()=>d,create:()=>b,init:()=>N,options:()=>j,tpl:()=>O});const r="undefined"!=typeof FormData?FormData:function(){this.data=null},n=function(t){let e="null",n=typeof t;return e="object"==n?null===t?"null":t.constructor==r?"formdata":t.constructor==Array?"array":t.constructor==Object?"object":t.constructor==Number?"number":"object":n,e},i=function(t){const e=n(t);return"string"==e||"number"==e&&!isNaN(t)||"object"==e&&(t.constructor==String||t.isPrimitive&&t.isString)},a=function(t){return"array"==n(t)||Array.isArray(t)},s=function(t){return"object"==n(t)},o=function(t){const e=n(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))||"object"==e&&(t.constructor==Number||t.isPrimitive&&t.isNumber)};function l(t,e){return s(t)&&i(e)&&Object.hasOwnProperty.call(t,e)}const p=function(t,e,r,o){if(void 0===t)return null;if(void 0===e)return t;var l=n(t),p=n(e);if("array"==l){var f=NaN;if("number"==p?f=e:NaN!=parseInt(e)&&(f=parseInt(e)),!isNaN(f)&&void 0!==t[f])return t[f]}else if("object"==l){var u=t,c=i(o)?o:".",h=String(e).split(c);for(let t=0;t<h.length;t++){const e=h[t];if(u=void 0!==u[e]?u[e]:r,t<h.length-1&&(!s(u)&&!a(u)||u===r))return r}return u}return r};var f=[];const u={isSN:function(t){if(void 0===t)return null;var e=n(t);return"string"==e||"number"==e},replace:function(){var t=h(arguments),e=t.length;if(0==e)return"";if("string"!=typeof t[0]||e<2)return t[0];var r=t[0],i=n(t[1]);if(this.isSN(t[1]))e>=3&&this.isSN(t[2])&&((a=Object.create({}))[t[1]]=t[2],r=this.replaceByObj(r,a));else if("array"==i){if(e>=3&&"array"==n(t[2]))r=this.replaceByArr(r,t[1],t[2]);else if(e>=3&&"string"==n(t[2])){var a=Object.create({}),s=t[2],o=t[1];for(var l in o)a[o[l]]=s;r=this.replaceByObj(r,a)}}else"object"==i&&(r=this.replaceByObj(r,t[1]));return r},replaceByArr:function(){var t=h(arguments),e=t.length;if(0==e)return"";if("string"!=typeof t[0]||e<2)return t[0];var r=t[0],i=n(t[1]);if("object"==i)r=this.replaceByObj(r,t[1]);else if("array"==i){var a=emptyObject();if(e>=3){var s=n(t[2]);if("string"==s)for(var o in t[1])a[t[1][o]]=t[2];else if("array"==s)for(var l=t[1].length,p=t[2].length,f=l>p?l:p,u=0;u<f;u++)a[t[1][u]]=t[2][u]}r=this.replaceByObj(r,a)}return r},replaceByObj:function(){var t=h(arguments),e=t.length;if(0==e)return"";if("string"!=typeof t[0]||e<2)return t[0];var r=t[0];if("object"==n(t[1])){var i=null;"number"==typeof t[2]&&(i=t[2]);var a=1,s=t[1];for(var o in s){var l=s[o];if(r=this.preg_replace(o,l,r),i&&a>=i)break;a++}}return r},escapeRegExp:function(t){return(""+t).replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},preg_replace:function(t,e,r){return(r=""+r).replace(new RegExp(this.escapeRegExp(t),"g"),e)},rand:function(t){var e,r,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";t&&i(t)&&(n+=String(t));for(var a=n.split(""),s=a.length-1,o="",l=0;l<32;l++)o+=a[(e=0,r=s,e||(e=0),r||(r=0),0==e&&r++,Math.floor(Math.random()*r)+e)];return o},eval:function(t,e){var r=typeof e,n=t;if("object"==r||"array"==r)for(var i in e=this.convertTextObject({},e)){var a=e[i];null===a&&(a="");var s="{$"+i+"}";n=this.replace(n,s,a)}return n},convertTextObject:function(t,e,r,n){if(inArray(f,e))return t;for(var i in e)if(e.hasOwnProperty(i)){"string"!=typeof n&&(n=".");var a=e[i],s=typeof a,o=void 0!==r&&(""+r).length?r+n+i:i;null==a||"object"!=s&&"array"!=s?t[o]=a:t=this.convertTextObject(t,a,o,n)}return f.push(e),t},objectKey:function(t,e){e||(e="_");for(var r=String(t),n="$ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=[],a=0,s=this.replace(this.replace(this.clearUnicode(r),"[]{}();:'\"\\|,./?~!@#$%^&*+=".split(""),"-"),"--","-"),o=0;o<s.length;o++){var l=s[o];-1==n.indexOf(l)?void 0!==i[a]&&n.indexOf(s[o-1])>=0&&a++:void 0===i[a]?i[a]=l:i[a]+=l}return i.join(e)}};var c=function(t,e,r,o){if(void 0===t)return null;if(void 0===e)return t;var p=n(t),f=n(e);if("array"==p){var u=NaN;if("number"==f?u=e:NaN!=parseInt(e)&&(u=parseInt(e)),!isNaN(u))return"function"==typeof t[u]?function(){t[u].apply(t,h(arguments))}:c(window,e,r,o)}else if("object"==p){var m=t,y=null,v=i(o)?o:".",g=String(e).split(v);for(let n=0;n<g.length;n++){const i=g[n];if(t!=window||0!=n||"window"!=i){if(0==n&&t!=window&&!l(t,i))return 1==g.length&&l(d,i)?function(){return d[i].render.apply(d[i],h(arguments))}:c(window,e,r,v);if(l(m,i)?(y=m,m=m[i]):m=r,n<g.length-1&&!s(m)&&!a(m))return console.log(t,e,y,m),r}}return function(t){return"function"==typeof t&&"number"!=typeof t.nodeType}(m)?function(){var t=h(arguments);return m.apply(y,t)}:function(){}}return function(){}};function h(t,e){var r=[];if((!o(e)||e<0)&&(e=0),t&&t.length)for(let n=e;n<t.length;n++){const e=t[n];r.push(e)}return r}const m=function(t){const e=[{type:"variable",str:"",params:""}];let r=0,n=!1,i="",a=0;return t.split("").map(((t,s)=>{if('"'==t||"'"==t)t==i?(n=!1,i="",r&&(e[a].params+=t)):r?(e[a].params+=t,n||(n=!0,i=t)):n?e[a].str+=t:(n=!0,i=t,r||(e[a].type="string"));else if(" "==t)r?e[a].params+=t:n?e[a].str+=t:e[a].type;else if(","==t)r?e[a].params+=t:n?e[a].str+=t:("string"!=e[a].type&&(e[a].str=e[a].str.trim()),"variable"==e[a].type&&o(e[a].str)&&(e[a].str=Number(e[a].str)),a++,e.push({type:"variable",str:"",params:""}));else if(")"==t)r?n?e[a].params+=t:(r--,0==r?(e[a].args=m(e[a].params),"string"!=e[a].type&&(e[a].str=e[a].str.trim()),o(e[a].str)&&(e[a].str=Number(e[a].str)),a++,e.push({type:"variable",str:"",params:""})):e[a].params+=t):e[a].str+=t;else if("("==t)if(r)n||r++,e[a].params+=t;else{if(""==e[a].str)throw new Error("cú pháp không hợp lệ tại vị trí: "+s);r++,e[a].type="function"}else r?e[a].params+=t:e[a].str+=t})),""==e[e.length-1].str&&"variable"==e[e.length-1].type&&e.pop(),e},y=function(t){const e=[{type:"variable",str:"",params:""}];var r=0,n=!1,i="",a=0;return t.split("").map(((t,s)=>{if('"'==t||"'"==t)t==i?(n=!1,i="",r&&(e[a].params+=t)):r?(e[a].params+=t,n||(n=!0,i=t)):n?e[a].str+=t:(n=!0,i=t,r||(e[a].type="string"));else if(" "==t)r?e[a].params+=t:n?e[a].str+=t:e[a].type;else if(";"==t)r||n?n?r?e[a].params+=t:e[a].str+=t:r&&(e[a].params+=","):("string"!=e[a].type&&(e[a].str=e[a].str.trim()),o(e[a].str)&&(e[a].str=Number(e[a].str)),a++,e.push({type:"variable",str:"",params:""}));else if(","==t)r?e[a].params+=t:e[a].str+=t;else if(")"==t)r?n?e[a].params+=t:0==--r?(e[a].args=m(e[a].params),"string"!=e[a].type&&(e[a].str=e[a].str.trim()),o(e[a].str)&&(e[a].str=Number(e[a].str)),a++,e.push({type:"variable",str:"",params:""})):e[a].params+=t:e[a].str+=t;else if("("==t)if(r)n||r++,e[a].params+=t;else{if(""==e[a].str)throw new Error("cú pháp không hợp lệ tại vị trí: "+s);r++,e[a].type="function","string"!=e[a].type&&(e[a].str=e[a].str.trim())}else r?e[a].params+=t:e[a].str+=t})),""==e[e.length-1].str&&"variable"==e[e.length-1].type&&e.pop(),e},v=t=>{if(!i(t))return t;let e=String(t);if(!/\{\s*[^\}]+\s*\}/i.test(e))return t;let r=[""],n=0,a="",s=!1,o="",l=[],p=!1,f="";for(let t=0;t<e.length;t++){const i=e[t];if(s)if("{"==i)r[n]=i,p?o+=i:o="";else if("}"==i)if(r[n]+=i,p)o+=i;else{let i=o.trim();l.push({key:i,template:r[n],biddings:y(i)}),o="",n++,a="",s=!1,t<e.length-1&&(r[n]="")}else-1!=["'",'"'].indexOf(i)&&(p?f==i&&(p=!1):(p=!0,f=i)),r[n]+=i,o+=i;else"{"==i&&(s=!0,r[n]=i);t&&""==a||(a=i)}return""==r[0]&&r.shift(),l};function g(t,e){this.template="",this.data={},this.actions=[];let r=this;this.root=e,this.parseMethodArgs=function(t){var e=[];if(a(t))for(let r=0;r<t.length;r++){const n=t[r];switch(n.type){case"function":e.push(c(this.data,n.str).apply(this.data,this.parseMethodArgs(n.args)));break;case"variable":e.push(p(this.data,n.str));break;default:e.push(n.str)}}return e},this.renderData=function(t){var e=this.actions;this.data=t;var r={};let n=[];for(let t=0;t<e.length;t++){const i=e[t];let a=i.key;if(!l(r,a)){let t=this.parseMethodArgs(i.biddings).join("");r[a]=t}n.push({data:r[a],template:i.template})}return this.data={},n},this.render=function(t,e){let r=this.renderData(t),n=this.template;return r.map((t=>n=u.replace(n,t.template,t.data))),e&&e instanceof Element?e.innerHTML=n:this.root&&this.root instanceof Element&&(this.root.innerHTML=n),n},(()=>{if(/[A-z0-9_\-]/i.test(t)){let e=document.getElementById(t);if(e){r.template=e.innerHTML;let t=e.getAttribute("role");t&&(l(d,t)||(d[t]=r)),e.parentNode.removeChild(e)}}r.template||(r.template=t),r.actions=v(r.template)})()}const b=(t,e)=>new g(t,e),d={},j={selector:'script[type="text/template"][role],script[type="text/html"][role]'},N=()=>{let t=document.querySelectorAll(j.selector),e={};if(t.length)for(let r=0;r<t.length;r++){const n=t[r];let i=n.innerHTML,a=n.getAttribute("role"),s=new g(i);a&&(d[a]=s,e[a]=s),n.parentNode.removeChild(n)}},O=t=>l(d,t)?d[t]:b(t);return e})()));